# ClojWar

A Clojure web application design to entertain the game lovers!

## Goal of the project

You start assembling an army of remote-controlled robots to fight the dinosaurs and the first step towards that is to run simulations on how they will perform. The goal of this project is implement a service that provides a war simulation against the dinosaurs, the project provides a REST API to support the those simulation and a web application that provides a way to display visually the simulation.

## Project Architecture

The project is structured in six main folders, they are:
+ **config** - _Configuration folder, contains the project configuration file. Here you can configure:_
    + _The grid size of the simulation;_
    + _Log path configuration;_
    + _Default server port;_
+ **doc** - _Documentation folder, contains the project documents, such as:_
    + _API Documentation;_
    + _Project namespaces documentation (generated by **Codox Library**);_
+ **logs** - _Default log directory;_
+ **resources** - _Resources folder, contains all images, css, js and html files in the project;_
+ **src** - _The main **source code**, basically contains the application;_
+ **test** - _The test folder, contains all application tests;_

### ClojWar Architecture
+ **core** - _This folder basically represents the **core** of the system, there you can find all the important elements of the project, such as the entities and theirs exclusive logics;_
+ **protocols** - _This folder contains the "contract" (protocol) of the application, this protocol is used for guarantee the communication between the application main logic and the storage implementations;_
+ **db** - _This folder contains the "storage implementations" based on the storages protocols located on protocols folder;_
+ **game.clj** - _This file is the main logic of the application, the file is responsible for create a "communication channel" between the storage implementation and core entities representation. This file also manages the some high logics, such as the application main flow, not the main behavior of the entities;_
+ **server.clj** - _This file is the application entrypoint, here we start the application properly;_
+ **api** - _This folder contains the application API Handler. The handler is responsible for abstract the **game.clj** (application logic) to a REST API accessible from anywhere, in others words, is just an API;_
+ **web** - _This folder contains the web part of the application, basically handles with web interface representation;_

## Running ClojWar in Docker

#### Running the server
To execute this project into a docker container, follow the procedure below:

```
# Build the Docker Image
$ docker build -t clojwar .

# Create the Docker Container
$ docker create -p <your_host_port>:<the_project_server_port> --name <your_container_name> clojwar

# Start the Docker Container
$ docker start <your_container_name>
```

#### Running the tests
After you create the docker image, you can run the tests using the following command below:

```
# Running tests inside the container (This overrides the default dockerfile command)
$ docker run -it clojwar lein test
```

## Running ClojWar Traditionally

#### Running the server
To execute this project, follow the procedure below:
```
# Running the server
$ lein run
```

#### Running the tests
You can run the tests using the following command below:
```
# Running the server
$ lein test
```